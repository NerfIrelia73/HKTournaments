<!--
<div class="viewBtnContainer" style="margin-top: -30px; margin-bottom: 15px;">
    <mat-button-toggle-group class="btnGroupContainer" name="fontStyle" aria-label="Font Style" [formControl]="selectedView">
        <mat-button-toggle value="list">List View</mat-button-toggle>
        <mat-button-toggle value="calendar">Calendar View</mat-button-toggle>
    </mat-button-toggle-group>
</div>
-->
<div class="viewBtnContainer">
    <section style="color: white;">
        <p style="color: white; display: flex; justify-content: center;">Tournament Select:</p>
        <p *ngFor="let item of tournaments" style="display: inline-block; margin-right: 10px;"><mat-checkbox (change)="updateSelectedTournaments($event)" [value]='item.uid' [checked]="true">{{ item.name }}</mat-checkbox></p>
    </section>
</div>
<div style="display: flex; flex-direction: row; justify-content: left;">
    <button routerLink="/create-match" style="background-color: white; margin-left: 32px; margin-bottom: 10px;" mat-button color="basic">Create a Match</button>
</div>
<div class="example-action-buttons" style="margin-left: 20px; color: white;">
    <button mat-button (click)="accordion.openAll()">Expand All</button>
    <button mat-button (click)="accordion.closeAll()">Collapse All</button>
</div>
<mat-accordion *ngIf="selectedView.value == 'list'" class="example-headers-align" multi>
    <div *ngFor="let source of dataSource" style=" display: flex; justify-content: left;">
        <mat-expansion-panel *ngIf="selectedTournaments.includes(source.tournament)" style="width: 60%; margin-left: 20px; margin-bottom: 20px;" [ngStyle]="{'background-color': source.locked ? '#46b52a' : '#7a7a7a'}">
            <mat-expansion-panel-header [collapsedHeight]="'130px'" [expandedHeight]="'130px'">
                <div class="panelContainer">
                    <div class="panelBox">
                        <span><strong>Runners</strong></span><br>
                        <span>{{ source.runners }}</span><br *ngIf="source.runners.length > 0">
                    </div>
                    <div class="panelBox">
                        <span><strong>Comms</strong></span><br>
                        <span *ngIf="adminInfo != null && !adminTournaments.includes(source.tournament) || source.locked">{{ source.comms }}</span><br *ngIf="source.comms.length > 0 && adminInfo != null && !adminTournaments.includes(source.tournament)">
                        <div style="font-size: 13px;">
                            <mat-form-field appearance="fill" *ngIf="adminInfo != null && adminTournaments.includes(source.tournament) && !source.locked && source.adminComms.length > 0">
                                <mat-label>Comms</mat-label>
                                <mat-select [formControl]="source.commsForm" multiple>
                                    <mat-option *ngFor="let comm of source.adminComms" [value]="comm.id" selected>{{ comm.name }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <button mat-raised-button color="primary" *ngIf="!source.locked" (click)="toggleSignUp('comms', source)">{{ this.adminInfo != null && !source.commsForm.value.includes(this.adminInfo.uid) ? 'Sign Up' : 'Cancel' }}</button>
                    </div>
                    <div class="panelBox">
                        <span><strong>Restreamer</strong></span><br>
                        <span *ngIf="adminInfo != null && !adminTournaments.includes(source.tournament) || source.locked">{{ source.restreamer }}</span><br *ngIf="source.restreamer.length > 0 && adminInfo != null && !adminTournaments.includes(source.tournament)">
                        <div style="font-size: 13px;">
                            <mat-form-field appearance="fill" *ngIf="adminInfo != null && adminTournaments.includes(source.tournament) && !source.locked && source.adminRestreamer.length > 0">
                                <mat-label>Restreamer</mat-label>
                                <mat-select [formControl]="source.restreamerForm" multiple>
                                    <mat-option *ngFor="let restreamer of source.adminRestreamer" [value]="restreamer.id" selected>{{ restreamer.name }}</mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                        <button mat-raised-button color="primary" *ngIf="!source.locked" (click)="toggleSignUp('restreamer', source)">{{ this.adminInfo != null && !source.restreamerForm.value.includes(this.adminInfo.uid) ? 'Sign Up' : 'Cancel' }}</button>
                    </div>
                    <div class="panelBox">
                        <span><strong>Date</strong></span><br>
                        <span>{{ source.date }}</span>
                    </div>
                    <div class="panelBox">
                        <span><strong>Confirmed</strong></span><br>
                        <span>{{ source.locked ? 'Yes' : 'No' }}</span>
                    </div>
                </div>
            </mat-expansion-panel-header>

            <div class="panelContainer">
                <div class="panelBox" style="text-align: left;">
                    <span *ngFor="let runner of source.participantInfo" style="display: block; margin-bottom: 4px;">{{ runner }}</span><br>
                </div>
                <div class="panelBox" style="text-align: left;">
                    <span *ngFor="let command of source.commands" style="display: block; margin-bottom: 4px;">{{ command }}</span><br>
                </div>
            </div>
        </mat-expansion-panel>
        <button (click)="toggleConfirm(source)" style="margin-top: 10px; height: 50%; margin-top: 32px; margin-left: 15px;" mat-raised-button color="success" *ngIf="adminInfo != null && adminTournaments.includes(source.tournament) && selectedTournaments.includes(source.tournament)">{{ source.locked ? 'Unconfirm Match' : 'Confirm Match' }}</button>
        <button (click)="deleteMatch(source)" style="margin-top: 10px; height: 50%; margin-top: 32px; margin-left: 15px;" mat-raised-button color="warn" *ngIf="adminInfo != null && adminTournaments.includes(source.tournament) && selectedTournaments.includes(source.tournament)" [disabled]="source.locked">Delete Match</button>
        <button (click)="resetMatch(source)" style="margin-top: 10px; height: 50%; margin-top: 32px; margin-left: 15px;" mat-raised-button color="primary" *ngIf="adminInfo != null && adminTournaments.includes(source.tournament) && selectedTournaments.includes(source.tournament)" [disabled]="source.locked">Undo Changes</button>
        <button (click)="toggleHKC(source)" style="margin-top: 10px; height: 50%; margin-top: 32px; margin-left: 15px;" mat-raised-button [color]="source.onHKC ? 'success' : 'warn'" *ngIf="adminInfo != null && adminTournaments.includes(source.tournament) && selectedTournaments.includes(source.tournament)">{{ source.onHKC ? 'On HKC' : 'Not on HKC'}}</button>
    </div>
</mat-accordion>